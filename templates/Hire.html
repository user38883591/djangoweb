<!DOCTYPE html>
<html lang="en">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title>
    <style>
        form{
            text-align: center;
            text-align: -moz-center;
        }
    </style>
</head>
<body style="background-color:greenyellow">
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-xl">
        </div>
      </nav>
    <div class="container-fluid">
    <div class="row text-center" style="padding-left:500px; padding-top:100px"> <br>
        <div class="col-md-4" style="background-color:darkcyan">
            <h2>HIRE</h2>
            <br>

            <form action="{% url 'hire' %}" method="post">
                {% csrf_token %}


                <div class="form-group">
                    <input type="text" class="form-control mt-4" id="name" placeholder="Full name" name="name" value="{{ data.user.first_name }} {{ data.user.last_name }}" required>
                </div>

                <div class="form-group">
                    <input type="email" class="form-control  mt-4" id="email" placeholder="Email" name="email" value="{{ data.user.email }}" required>
                </div>
                <div class="form-group">
                    <input type="text" class="form-control mt-4" id="equipment" placeholder="Equipment name" name="equipment" value="{{ data.equipment }}" required>

                </div>

                <div class="form-group">
                    <input type="tel" class="form-control mt-4" id="phone_number" placeholder="Phone number" name="phone" required>

                </div>
                <div class="form-group">
                    <input type="number" class="form-control mt-4" id="days" placeholder="Days to hire" name="days" min="1" max="10" required >

                </div>
                <div class="form-group">
                    <input type="number" class="form-control mt-4" id="quantity" placeholder="how many equipments" name="quantity" min="1" max="5">

                </div>

                <div class="d-grid gap-2">

                    <button class="btn btn-success mt-2 mb-2" type="button" onclick="makeRequest()">Hire</button>
                </div>

            </form>

        </div>
    </div>
</div>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script>
        function makeRequest() {

            var name = document.getElementById('name').value;
            var email = document.getElementById('email').value;
            var equipment = document.getElementById('equipment').value;
            var phone = document.getElementById('phone').value;
            var days = document.getElementById('days').value;

            // Create the data payload
            var data = {
                name: name,
                email: email,
                equipment: equipment,
                phone: phone,
                days: days,
            };
            // Make an AJAX request to the server
            // Assuming you're using jQuery for AJAX
            $.ajax({
                url: '/hire/',
                method: 'POST',
                data: data,
                success: function(response) {
                    handleResponse(response);
                },
                error: function() {
                    swal("Error!", "Request failed.", "error");
                }
            });
        }

        function handleResponse(response) {
            if (response.success) {
                hireSuccess();
            } else {
                swal("Error!", "Request failed.", "error");
            }
        }
        function hireSuccess(){
            swal({
              title: "Good job!",
              text: "You clicked the button!",
              icon: "success",
              button: "Home",
            });
        }
    </script>
</body>
</html>